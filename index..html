<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promise Async Await</title>
</head>

<body>

    <style>
        pre {
            color: blue;
        }
    </style>

    <h1>Promise Async Await</h1>

    <h4>Q.1 Write one example explaining how you can write a callback function ?</h4>
    <pre>
        function sum(a, b) {
            return a + b;
          }
          function age(name, age) {
            console.log(`${name} ${age}`);
          }
          age("moni", sum(10, 20));
    </pre>


    <h4>Q.2 "Write callback function to print numbers from 1 to 7, in which 1 should be printed after 1 sec , 2 should
        be printed after 2 sec, 3 should be printed after 3 sec and so on. Explain callback hell.
        Numbers
        1
        2
        3
        4
        5
        6
        7"</h4>
    <pre>
        function callbackHell() {
            setTimeout(() => {
              console.log(count++);
              setTimeout(() => {
                console.log(count++);
                setTimeout(() => {
                  console.log(count++);
                  setTimeout(() => {
                    console.log(count++);
                    setTimeout(() => {
                      console.log(count++);
                      setTimeout(() => {
                        console.log(count++);
                        setTimeout(() => {
                          console.log(count++);
                        }, 7000);
                      }, 6000);
                    }, 5000);
                  }, 4000);
                }, 3000);
              }, 2000);
            }, 1000);
          }
          let count = 1;
          callbackHell();
    </pre>


    <h4>Q.3 "Write promise function to print numbers from 1 to 7, in which 1 should be printed after 1 sec , 2 should be
        printed after 2 sec, 3 should be printed after 3 sec and so on.
        Numbers
        1
        2
        3
        4
        5
        6
        7"</h4>
    <pre>
        let promise = new Promise(function (resolve, reject) {
            let a = 10;
            if (a > 9) {
              function callbackHell() {
                setTimeout(() => {
                  console.log(count++);
                  setTimeout(() => {
                    console.log(count++);
                    setTimeout(() => {
                      console.log(count++);
                      setTimeout(() => {
                        console.log(count++);
                        setTimeout(() => {
                          console.log(count++);
                          setTimeout(() => {
                            console.log(count++);
                            setTimeout(() => {
                              console.log(count++);
                            }, 7000);
                          }, 6000);
                        }, 5000);
                      }, 4000);
                    }, 3000);
                  }, 2000);
                }, 1000);
              }
              let count = 1;
              callbackHell();
            } else reject("a is less than 9");
          });
          promise
            .then((data) => {
              console.log(data);
            })
            .catch((data) => {
              console.log(data);
            });          
    </pre>


    <h4>Q.4 Create a promise function accepting a argument, if yes is passed to the function then it should go to
        resolved
        state and print Promise Resolved, and if nothing is passed then it should go to reject state and catch the
        error and print Promise Rejected </h4>
    <pre>
        let promise = new Promise(function (resolve, reject) {
            let a = 10;
            if (a > 9) {
                resolve("Promise Resolved");
            }
            else reject("Promise Rejected");
        })
        promise.then((data) => { console.log(data); }).catch((data) => { console.log(data); })
    </pre>


    <h4>Q.5 Create examples to explain callback function</h4>
    <b>JavaScript CallBack Function</b>
    <pre>
        // function
        function greet(name, callback) {
            console.log('Hi' + ' ' + name);
            callback();
        }

        // callback function
        function callMe() {
            console.log('I am callback function');
        }

        // passing function as an argument
        greet('Peter', callMe);
    </pre>


    <h4>Q.6 Create examples to explain callback hell function</h4>
    <b>Callback Hell: </b>
    <pre>
        function callbackHell() {
            setTimeout(() => {
              console.log(count++);
              setTimeout(() => {
                console.log(count++);
                setTimeout(() => {
                  console.log(count++);
                  setTimeout(() => {
                    console.log(count++);
                    setTimeout(() => {
                      console.log(count++);
                      setTimeout(() => {
                        console.log(count++);
                        setTimeout(() => {
                          console.log(count++);
                        }, 7000);
                      }, 6000);
                    }, 5000);
                  }, 4000);
                }, 3000);
              }, 2000);
            }, 1000);
          }
          let count = 1;
          callbackHell();
    </pre>


    <h4>Q.7 Create examples to explain promises function</h4>
    <b>Promises: </b>
    <pre>
        let promise = new Promise(function (resolve, reject) {
            let a = 10;
            if (a > 9) {
                resolve("Promise Resolved");
            }
            else reject("Promise Rejected");
        })
        promise.then((data) => { console.log(data); }).catch((data) => { console.log(data); })
    </pre>


    <h4>Q.8 Create examples to explain async await function</h4>
    <b>Javscript async</b>
    <pre>
        // async function example

        async function f() {
            console.log('Async function.');
            return Promise.resolve();
        }

        f();
    </pre>
    <pre>
        // await function example

        // a promise
        let promise = new Promise(function (resolve, reject) {
            setTimeout(function () {
                resolve('Promise resolved')
            }, 4000);
        });

        // async function
        async function asyncFunc() {

            // wait until the promise resolves 
            let result = await promise;

            console.log(result);
            console.log('hello');
        }

        // calling the async function
        asyncFunc();
    </pre>


    <h4>Q.9 Create examples to explain promise.all function</h4>
    <pre>
        const p1 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The first promise has resolved');
                resolve(10);
            }, 1 * 1000);
        });
        const p2 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The second promise has resolved');
                resolve(20);
            }, 2 * 1000);
        });
        const p3 = new Promise((resolve, reject) => {
            setTimeout(() => {
                console.log('The third promise has resolved');
                resolve(30);
            }, 3 * 1000);
        });

        Promise.all([p1, p2, p3]).then((results) => {
            const total = results.reduce((p, c) => p + c);

            console.log(`Results: ${results}`);
            console.log(`Total: ${total}`);
        });
    </pre>

</body>

</html>